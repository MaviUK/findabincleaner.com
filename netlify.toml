# --- API / Function redirects (put these FIRST) ---

# Geo JSON feeds for the mini map
[[redirects]]
from = "/api/geo/my-coverage"
to = "/.netlify/functions/geo-my-coverage"
status = 200

[[redirects]]
from = "/api/geo/my-wins"
to = "/.netlify/functions/geo-my-wins"
status = 200

[[redirects]]
from = "/api/geo/available"
to = "/.netlify/functions/geo-available"
status = 200

# Sponsorship purchase (legacy) - safe to keep if you still have the function
[[redirects]]
from = "/api/sponsored/purchase"
to = "/.netlify/functions/sponsored-purchase"
status = 200

# Live price preview used by the modal
[[redirects]]
from = "/api/sponsored/preview"
to = "/.netlify/functions/sponsored-preview"
status = 200

# Stripe Checkout session creator
[[redirects]]
from = "/api/sponsored/checkout"
to = "/.netlify/functions/sponsored-checkout"
status = 200

# Stripe webhook (server-to-server)
[[redirects]]
from = "/api/stripe/webhook"
to = "/.netlify/functions/stripe-webhook"
status = 200

# Optional: support the dashed geo path you tried earlier
[[redirects]]
from = "/api/geo-my-coverage"
to = "/.netlify/functions/geo-my-coverage"
status = 200

# --- SPA catch-all (MUST be LAST) ---
[[redirects]]
from = "/*"
to = "/index.html"
status = 200
